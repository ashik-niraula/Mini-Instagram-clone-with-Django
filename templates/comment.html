{% extends "base.html" %}
{% load static %}
{% block main %}
<main class="suggestions-main">
    <!-- Header -->
    <div class="suggestions-header">
        <h1>Users Liked the Post</h1>
        <div class="search-box">
            <form>
            <input type="text" name='search' placeholder="Search Users commented...">
            <button type="submit">
                <i class="fas fa-search"></i>
            </button>
            </form>
        </div>
    </div>

    <!-- Following List -->
    <div class="follow-list">
        {% if users_commented %}
            {% for commented in users_commented %}
                <!-- Use 'with' to rename for clarity -->
                <div class="follow-item">
                    <div class="follow-user">
                        {% if commented.user.profile.profile_image %}
                            <img src="{{ commented.user.profile.profile_image.url }}" class="follow-avatar" alt="User">
                        {% else %}
                            <img src="{% static "test/default-user.png" %}" class="follow-avatar" alt="User">
                        {% endif %}
                        <div class="follow-info">
                            <!-- CORRECTED: Use user.username instead of following.user.username -->
                            <a href="{% url 'profile' commented.user.username %}" class="follow-username">
                                {{ commented.user.username }}
                            </a>
                            <span class="follow-name">
                                {{ commented.user.first_name }} {{ commented.user.last_name }}
                            </span>
                        </div>
                    </div>
                    
                    
                </div>
            {% endfor %}
        {% else %}
            <div class="no-posts">
                 <i class="fab fa-instagram"></i>
                <h3>No comments Yet</h3>
            </div>
        {% endif %}
    </div>
</main>
{% endblock main %}